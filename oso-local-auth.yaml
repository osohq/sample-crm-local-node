facts:
  has_role(User:_, String:_, Organization:_):
    query: >
      SELECT
        DISTINCT users.username, users.role::TEXT, users.org
      FROM
        users

  has_role(User:_, String:_):
    query: >
      SELECT
        DISTINCT users.username, users.role::TEXT
      FROM
        users
      WHERE users.org = '_'

  has_relation(User:_, parent, Organization:_):
    query: SELECT username, org FROM users

sql_types:
  User: TEXT
  Organization: TEXT
